/* 
Artisan.js by David Brooks. Details at http://www.artisanjs.com
*/
var artisan=function(a,b){if(!document.createElement("canvas").getContext){return}var d=[];var e=[];var f=["#AC4A08","#6C88A1","#D9DCC6","#EB9E1A","#FBCC37"];var g=[];var i=0;var j=[];var k=[];return{define:{canvas:function(){},stack:function(){var a=[]},defaultColors:function(a){f=a}},setupCanvas:function(a){var b=document.getElementById(a);var c=b.getContext("2d");var d=[a,c];g.push(d)},create:{canvas:function(a,b,c){},stack:function(){var a=[];var b=[];var c=[];b.push(c);a.push(b);d.push(a);return d.length-1},layer:function(a){if(!a||isNaN(a)){a=0}var b=[];var c=[];b.push(c);d[a].push(b);return d[a].length-1},history:function(a,b){if(!a||isNaN(a)){a=0}if(!b||isNaN(b)){b=0}var c=[];d[a][b].push(c);return d[a][b].length-1}},clear:{layer:function(a,b){if(!a||isNaN(a)){a=0}if(!b||isNaN(b)){b=0}var c=d[a][b];for(l=0;l<c.length;l++){c[l]=[]}}},collect:{current_history:function(){return j}},convertTo:{PNG:function(a){var b=document.getElementById(a);b=b.toDataURL();return b}},addToHistory:function(a,b,c,e,f){if(!a||isNaN(a)){a=0}if(!b||isNaN(b)){b=0}if(!c||isNaN(c)){c=0}var g=[];g.push(e,f);d[a][b][c].push(g)},interpretElement:function(a){var b=document.getElementById(a).tagName;return b},findContext:function(a){var b="";for(c=0;c<g.length;c++){if(g[c][0]==a){b=g[c][1]}}if(b===""){artisan.setupCanvas(a);b=artisan.findContext(a)}return b},drawCircle:function(a,b,c,d,e,f,g,h,i,k,l,m){var n=document.getElementById(a);var o=n.width;var p=n.height;b=artisan.interpretRequest(b,o);c=artisan.interpretRequest(c,p);f=artisan.interpretRequest(f,o);d=artisan.interpretRequest(d,o);e=artisan.interpretColor(e);h=artisan.interpretAlpha(h);g=artisan.interpretColor(g);k=artisan.interpretColor(k);if(i!=="random"){i=parseInt(i,10)}l=parseInt(l,10);m=parseInt(m,10);if(!i){i=0}else if(i==="random"){i=artisan.randomize(0,30)}if(!l||isNaN(l)){l=0}if(!m||isNaN(m)){m=0}var q=[b,c,d,e,f,g,h,i,k,l,m];var r=["circle",q];j.push(r);var s=artisan.interpretElement(a);switch(s){case"CANVAS":var t=artisan.findContext(a);t.beginPath();t.lineWidth=f;t.globalAlpha=h;t.arc(b,c,d,0,Math.PI*2,true);t.closePath();t.fillStyle=e;if(f!==0){t.strokeStyle=g;t.stroke()}if(i){t.shadowOffsetX=l;t.shadowOffsetY=m;t.shadowBlur=i;t.shadowColor=k}if(e!==""){t.fill()}break;default:}},drawRectangle:function(a,b,c,d,e,g,h,i,j,k,l,m,n){var o=document.getElementById(a);var p=o.width;var q=o.height;b=artisan.interpretRequest(b,p);c=artisan.interpretRequest(c,q);d=artisan.interpretRequest(d,p);e=artisan.interpretRequest(e,q);h=artisan.interpretRequest(h,p);i=artisan.interpretColor(i);g=artisan.interpretColor(g);j=artisan.interpretAlpha(j);if(k!=="random"){k=parseInt(k,10)}m=parseInt(m,10);n=parseInt(n,10);if(!k){k=0}else if(k==="random"){k=artisan.randomize(0,30)}if(!l){l=""}else if(l==="random"){l=f[artisan.randomize(0,f.length)]}else if(l.constructor.toString().indexOf("Array")!==-1){l=l[artisan.randomize(0,l.length)]}if(!m||isNaN(m)){m=0}if(!n||isNaN(n)){n=0}var r=artisan.interpretElement(a);switch(r){case"CANVAS":var s=artisan.findContext(a);s.fillStyle=g;s.strokeStyle=i;s.lineWidth=h;s.globalAlpha=j;if(k){s.shadowOffsetX=m;s.shadowOffsetY=n;s.shadowBlur=k;s.shadowColor=l}s.fillRect(b,c,d,e);if(h!==0){s.strokeRect(b,c,d,e)}break;default:}},drawImage:function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){var p=document.getElementById(a);var q=p.width;var r=p.height;if(b){c=artisan.interpretRequest(c,q);d=artisan.interpretRequest(d,r);e=artisan.interpretRequest(e,q);g=artisan.interpretRequest(g,r);j=artisan.interpretRequest(j,q);i=artisan.interpretColor(i);h=artisan.interpretAlpha(h);k=artisan.interpretColor(k);m=artisan.interpretColor(m);if(l!=="random"){l=parseInt(l,10)}n=parseInt(n,10);o=parseInt(o,10);if(!l){l=0}else if(l==="random"){l=artisan.randomize(0,30)}if(!m){m=""}else if(m==="random"){m=f[artisan.randomize(0,f.length)]}else if(m.length){m=m[artisan.randomize(0,m.length)]}if(!n||isNaN(n)){n=0}if(!o||isNaN(o)){o=0}var s=artisan.interpretElement(a);switch(s){case"CANVAS":var t=artisan.findContext(a);var u=new Image;u.src=b;u.style.opacity=h;u.style.MozOpacity=h;u.onload=function(){t.shadowOffsetX=n;t.shadowOffsetY=o;t.shadowBlur=l;t.shadowColor=m;t.strokeStyle=k;t.fillStyle=i;t.drawImage(u,c,d,e,g)};break;default:}}},drawPath:function(a,b,c,d,e,f){var g=document.getElementById(a);var h=g.width;var i=g.height;var j,k,l,m,n,o;var q=artisan.findContext(a);if(!b){b=[[0,0]]}c=artisan.interpretRequest(c,h);e=artisan.interpretColor(e);f=artisan.interpretAlpha(f);d=artisan.interpretColor(d);var r=b[0][0];r=artisan.interpretRequest(r,h);var s=b[0][1];s=artisan.interpretRequest(s,i);q.beginPath();q.moveTo(r,s);for(p=1;p<b.length;p++){var t=b[p][0];t=artisan.interpretRequest(t,h);var u=b[p][1];u=artisan.interpretRequest(u,i);if(!b[p][2]){q.lineTo(t,u)}else if(b[p][2]==="bezier"){j=b[p][3];j=artisan.interpretRequest(j,h);k=b[p][4];k=artisan.interpretRequest(k,i);l=b[p][5];l=artisan.interpretRequest(l,h);m=b[p][6];m=artisan.interpretRequest(m,i);q.bezierCurveTo(j,k,l,m,t,u)}else if(b[p][2]==="quadratic"){j=n+2/3*(b[p][3]-n);j=artisan.interpretRequest(j,h);k=o+2/3*(b[p][4]-o);k=artisan.interpretRequest(k,i);l=j+(t-n)/3;l=artisan.interpretRequest(l,h);m=k+(u-o)/3;m=artisan.interpretRequest(m,i);q.bezierCurveTo(j,k,l,m,t,u)}n=t;o=u}if(c!==0&&d!==""){c=artisan.analyzeValue(c,h);q.lineWidth=c;q.stroke()}if(e!==""){q.fillStyle=e;q.fill()}q.closePath()},drawLine:function(a,b,c,d,e,f,g,h,i,j,k,l){var m=document.getElementById(a);var n=m.width;var o=m.height;b=artisan.interpretRequest(b,n);c=artisan.interpretRequest(c,o);d=artisan.interpretRequest(d,n);e=artisan.interpretRequest(e,o);i=artisan.interpretRequest(i,n);j=artisan.interpretRequest(j,o);k=artisan.interpretRequest(k,n);l=artisan.interpretRequest(l,o);f=artisan.interpretRequest(f,n);g=artisan.interpretColor(g);var p=artisan.findContext(a);p.beginPath();p.moveTo(b,c);if(!h){p.lineTo(d,e)}else if(h==="bezier"){i=parseInt(i,10);j=parseInt(j,10);k=parseInt(k,10);l=parseInt(l,10);p.bezierCurveTo(i,j,k,l,d,e)}else if(h==="quadratic"){i=b+2/3*(i-b);j=c+2/3*(j-c);k=i+(d-b)/3;l=j+(e-c)/3;i=parseInt(i,10);j=parseInt(j,10);k=parseInt(k,10);l=parseInt(l,10);p.bezierCurveTo(i,j,k,l,d,e)}if(f!==0&&g!==""){p.strokeStyle=g;p.lineWidth=f;p.stroke()}},closePath:function(a){var b=artisan.findContext(a);b.closePath()},drawText:function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=document.getElementById(a);var o=n.width;var p=n.height;b=artisan.interpretRequest(b,o);c=artisan.interpretRequest(c,p);e=artisan.interpretColor(e);j=artisan.interpretAlpha(j);k=artisan.interpretRequest(k,o);l=artisan.interpretColor(l);if(!d){d=""}if(!f){f=""}if(g!=="random"&&g){g=artisan.analyzeValue(g,o)+"px"}else if(g==="random"){g=artisan.randomize(0,190)+"px"}else if(!g){g="15px"}if(!h){h="sans-serif"}var q=f+" "+g+" "+h;if(!i){i="left"}if(!m){m="top"}var r=artisan.findContext(a);r.textAlign=i;r.globalAlpha=j;r.fillStyle=e;r.font=q;r.textBaseline=m;r.fillText(d,b,c);if(k!==0){r.strokeText(d,b,c)}},drawStack:function(a,b,c){if(b==="latest"){b=d.length-1}else if(!b||isNaN(b)||b==="first"){b=0}for(l=0;l<d[b].length;l++){if(c==="first"||c===0){c=0}else if(!c||isNaN(c)||c==="latest"){c=d[b][l].length-1}artisan.drawLayer(a,b,l,c)}},drawLayer:function(a,b,c,e){if(!b||isNaN(b)){b=0}if(c==="latest"){c=d[b].length-1}else if(!c||isNaN(c)||c==="first"){c=0}if(e==="previous"){e=d[b][c].length-2}else if(!e||isNaN(e)||e==="latest"){e=d[b][c].length-1}else if(e==="first"||e===0){e=0}j=[];for(h=0;h<d[b][c][e].length;h++){var f=d[b][c][e][h][0];var g=d[b][c][e][h][1];artisan.handleDirective(a,f,g)}var i=d[b][c][e].toString();var k=j.toString();if(k!==i){d[b][c][e].push(j)}},randomize:function(a,b){var c=parseInt(a+Math.random()*(b-a),10);return c},convertToPercentage:function(a,b){var c=100/b*a;return c},convertToPixels:function(a,b){var c=b*(a/100);return c},rotateCanvas:function(a,b){if(b==="reset"){b=i*-1}else if(b==="random"){b=artisan.randomize(-1,360)}var c=artisan.findContext(a);var d=360/b;i=i+b;if(i<0){i=360-Math.abs(i)}else if(i>360){var e=i-360;i=e}c.rotate(Math.PI*2/d)},clearCanvas:function(a){var b=document.getElementById(a);var c=b.width;var d=b.height;var e=artisan.findContext(a);e.clearRect(0,0,c,d)},resetDefaults:function(a){a.globalAlpha=1},analyzeValue:function(a,b){var a=a.toString();if(!!a.match("%")){a=parseFloat(a);a=artisan.convertToPixels(a,b)}else if(!!a.match("px")){a=parseInt(a)}else{a=parseInt(a)}return a},interpretRequest:function(a,b){var c=parseInt(a);if(a==="random"){a=artisan.randomize(0,b)}else if(a==="center"){a=b/2}else if(!a||isNaN(c)){a=0}else{a=artisan.analyzeValue(a,b)}return a},interpretColor:function(a){if(a===null||!a){a=""}else if(a.constructor.toString().indexOf("Array")!==-1){var b=artisan.randomize(0,a.length);a=a[b]}else if(a==="random"){var c=artisan.randomize(0,f.length);a=f[c]}else{a=a}return a},interpretAlpha:function(a){if(a){a=a.toString();if(!!a.match("%")){a=parseFloat(a)/100}else if(a==="random"){a=artisan.randomize(0,100)/100}}else{a=1}return a},handleDirective:function(a,b,c){switch(b){case"circle":artisan.drawCircle(a,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12]);break;case"rectangle":artisan.drawRectangle(a,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12]);break;case"path":artisan.drawPath(a,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12]);break;case"image":artisan.drawImage(a,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12]);break;case"line":artisan.drawLine(a,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12]);break;case"text":artisan.drawText(a,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12]);break;default:}}}}(this);artisan.create.stack()